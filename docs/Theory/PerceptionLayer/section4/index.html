<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Theory/PerceptionLayer/section4" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Perception Layer - Section 4 | IoT_UdeA</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://dipato.github.io/Material/img/logoudea.png"><meta data-rh="true" name="twitter:image" content="https://dipato.github.io/Material/img/logoudea.png"><meta data-rh="true" property="og:url" content="https://dipato.github.io/Material/docs/Theory/PerceptionLayer/section4"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Perception Layer - Section 4 | IoT_UdeA"><meta data-rh="true" name="description" content="* Learn the Arduino programming API to serially communicate with external ESP32 hardware"><meta data-rh="true" property="og:description" content="* Learn the Arduino programming API to serially communicate with external ESP32 hardware"><link data-rh="true" rel="canonical" href="https://dipato.github.io/Material/docs/Theory/PerceptionLayer/section4"><link data-rh="true" rel="alternate" href="https://dipato.github.io/Material/docs/Theory/PerceptionLayer/section4" hreflang="en"><link data-rh="true" rel="alternate" href="https://dipato.github.io/Material/docs/Theory/PerceptionLayer/section4" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/Material/blog/rss.xml" title="IoT_UdeA RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Material/blog/atom.xml" title="IoT_UdeA Atom Feed"><link rel="stylesheet" href="/Material/assets/css/styles.53ef5efc.css">
<script src="/Material/assets/js/runtime~main.929c508f.js" defer="defer"></script>
<script src="/Material/assets/js/main.d2248f21.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Material/"><div class="navbar__logo"><img src="/Material/img/logoudea.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Material/img/logoudea.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">IoT</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Material/docs/Theory/Introduction/definition">Theory</a><a class="navbar__item navbar__link" href="/Material/docs/Labs/lab1">Laboratory</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Material/docs/Theory/Introduction/definition">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Material/docs/Theory/PerceptionLayer/section1">Perception Layer</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Material/docs/Theory/PerceptionLayer/section1">Section 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Material/docs/Theory/PerceptionLayer/section2">Section 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Material/docs/Theory/PerceptionLayer/section3">Section 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Material/docs/Theory/PerceptionLayer/section4">Section 4</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Material/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Perception Layer</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Section 4</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Perception Layer - Section 4</h1>
<div style="text-align:justify"><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span><strong>Goals</strong></div><div class="admonitionContent_BuS1"><ul>
<li>Learn the Arduino programming API to serially communicate with external ESP32 hardware</li>
<li>Learn how to perform software debugging for microcontrollers through serial communication</li>
<li>Implement a protocol via serial communication to connect desktop applications with microcontroller firmware</li>
</ul></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="main-references">Main References<a class="hash-link" aria-label="Direct link to Main References" title="Direct link to Main References" href="/Material/docs/Theory/PerceptionLayer/section4#main-references">​</a></h2><ul>
<li>The most part of this lesson is taken from <strong>lesson 2, 2 A deeper dive into IoT</strong> from <strong>IoT for Beginners course</strong> (<a href="https://github.com/microsoft/IoT-For-Beginners" target="_blank" rel="noopener noreferrer">link</a>).</li>
<li>Other information was taken from: <a href="https://randomnerdtutorials.com/" target="_blank" rel="noopener noreferrer">https://randomnerdtutorials.com/</a></li>
<li>ESP32 Arduino Core’s documentation (<a href="https://espressif-docs.readthedocs-hosted.com/projects/arduino-esp32/en/latest/" target="_blank" rel="noopener noreferrer">link</a>)</li>
<li><strong>Serial Communication</strong> tutorial from Sparkfun (<a href="https://learn.sparkfun.com/tutorials/serial-communication/serial-intro" target="_blank" rel="noopener noreferrer">link</a>).</li>
<li><strong>Circuit Playground Express Serial Communications</strong> tutorial from Adafruit (<a href="https://learn.adafruit.com/circuit-playground-express-serial-communications" target="_blank" rel="noopener noreferrer">link</a>)</li>
<li><strong>Arduino Lesson 5. The Serial Monitor</strong> tutorial from Adafruit (<a href="https://learn.adafruit.com/adafruit-arduino-lesson-5-the-serial-monitor/overview" target="_blank" rel="noopener noreferrer">link</a>)</li>
<li><strong>UART: A Hardware Communication Protocol Understanding Universal Asynchronous Receiver/Transmitter</strong>: (<a href="https://www.analog.com/en/analog-dialogue/articles/uart-a-hardware-communication-protocol.html" target="_blank" rel="noopener noreferrer">link</a>)</li>
<li>Other references:<!-- -->
<ul>
<li><a href="https://randomnerdtutorials.com/" target="_blank" rel="noopener noreferrer">https://randomnerdtutorials.com/</a></li>
<li><a href="https://www.adafruit.com/" target="_blank" rel="noopener noreferrer">https://www.adafruit.com/</a></li>
<li><a href="https://www.sparkfun.com/" target="_blank" rel="noopener noreferrer">https://www.sparkfun.com/</a></li>
<li><a href="https://www.seeedstudio.com/" target="_blank" rel="noopener noreferrer">https://www.seeedstudio.com/</a></li>
<li><a href="https://projecthub.arduino.cc/" target="_blank" rel="noopener noreferrer">https://projecthub.arduino.cc/</a></li>
<li><a href="https://www.hackster.io/ubidots/projects" target="_blank" rel="noopener noreferrer">https://www.hackster.io/ubidots/projects</a></li>
</ul>
</li>
</ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="serial-communication">Serial communication<a class="hash-link" aria-label="Direct link to Serial communication" title="Direct link to Serial communication" href="/Material/docs/Theory/PerceptionLayer/section4#serial-communication">​</a></h2><p>Through communication, it is possible for multiple devices to transfer and receive information between them, as shown in the following figure (<a href="https://docs.espressif.com/projects/esp-at/en/latest/esp32/Get_Started/Hardware_connection.html" target="_blank" rel="noopener noreferrer">link</a>).</p><div class="custom-img-container"><img src="/Material/assets/images/esp32-wroom-hw-connection-e5a39450ac8e6a0feea20dfdea57f84d.png" alt="" class="custom-img custom-img"><div class="custom-caption">XXX</div></div><p>Information can be transferred in a parallel or serial manner. The difference lies in the amount of data that is transferred simultaneously (<a href="https://learn.adafruit.com/circuit-playground-express-serial-communications/overview" target="_blank" rel="noopener noreferrer">link</a>).</p><div class="custom-img-container"><img src="/Material/assets/images/transferencia_de_bits-6f91be3f66ee0562b7b0ea2b2c594df4.png" alt="" class="custom-img custom-img"><div class="custom-caption">XXX</div></div><p>One of the main problems with parallel data transfer is the number of lines used. On one hand, each line used occupies a hardware port (e.g., a pin of a microcontroller). On the other hand, ports are a limited resource, so if a parallel communication interface is implemented, many of the ports will be used solely for communication tasks. This means that, in the worst case, very few ports will be available for connecting the sensors and actuators needed for the microcontroller to interact with its environment.</p><p>To address the aforementioned problem, serial communication emerges, in which the information is placed in a data block (usually a byte) and transmitted bit by bit following a format like the one shown below.(<a href="https://learn.sparkfun.com/tutorials/serial-communication/all" target="_blank" rel="noopener noreferrer">link</a>):</p><div class="custom-img-container"><img src="/Material/assets/images/serial_trama-5c0d263b0825d29cec77ce2f23d9471b.png" alt="" class="custom-img custom-img"><div class="custom-caption">XXX</div></div><p>The following figure shows an example in which two data frames are transferred (<a href="https://learn.sparkfun.com/tutorials/serial-communication/all" target="_blank" rel="noopener noreferrer">link</a>):</p><div class="custom-img-container"><img src="/Material/assets/images/trama_datos_serial-1ec3ed592bbc351f58998df71bcdeccb.png" alt="" class="custom-img custom-img"><div class="custom-caption">XXX</div></div><p>The hardware for transmitting data is the <strong>bus serial</strong>. A serial bus consists of two wires for data transmission: one for sending and one for receiving. Therefore, devices capable of serial communication must have two pins: one associated with the receiver <strong>RX</strong> and another associated with the transmitter <strong>TX</strong>.
It is important to note that these labels <strong>RX</strong> and <strong>TX</strong> refer to the device itself. Therefore, the <strong>RX</strong> of one device should connect to the <strong>TX</strong> of the other and vice versa. The following figure clarifies this:</p><div class="custom-img-container"><img src="/Material/assets/images/pines_serial-0be65f2e52f84ec7eb0e6d2f996f1751.png" alt="" class="custom-img custom-img"><div class="custom-caption">XXX</div></div><p>The hardware responsible for converting data from parallel to serial (and vice versa) and ensuring their serial transfer is known as <strong>UART (Universal Asynchronous Receiver/Transmitter)</strong> and is integrated into microcontrollers:</p><div class="custom-img-container"><img src="/Material/assets/images/uart-c8bab03e6f3b695973436c37816a6087.png" alt="" class="custom-img custom-img"><div class="custom-caption">XXX</div></div><p>However, it is important to clarify that serial communication using <strong>UART</strong> is not the only existing method, as new protocols have emerged over the years, among which the following stand out:</p><ul>
<li>USB (Universal Serial Bus)</li>
<li>Ethernet</li>
<li>SPI (Serial Peripherical Interface)</li>
<li>I2C (Inter-Integrated Circuit)</li>
</ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="arduino-serial-communication-api">Arduino Serial Communication API<a class="hash-link" aria-label="Direct link to Arduino Serial Communication API" title="Direct link to Arduino Serial Communication API" href="/Material/docs/Theory/PerceptionLayer/section4#arduino-serial-communication-api">​</a></h2><p>In the Arduino API (<a href="https://www.arduino.cc/reference/en/" target="_blank" rel="noopener noreferrer">link</a>), you can find the main functions, classes, and data structures used to write programs in Arduino. In the <a href="https://www.arduino.cc/reference/en/language/functions/communication/serial/" target="_blank" rel="noopener noreferrer">Serial</a> link of the <strong>Communication</strong> section, you can access the documentation for all the functions used to establish serial communication.</p><div class="custom-img-container"><img src="/Material/assets/images/API_serial-29f7096f522e08eff39cc6d3f9b65d29.png" alt="" class="custom-img custom-img"><div class="custom-caption">XXX</div></div><p>The following are descriptions of the main functions of the API most commonly used for serial communication:</p><table><thead><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code>Serial.begin()</code></td><td>Sets the serial transmission speed (bits per second = baud).<br><br><strong>Syntax</strong>:<br><code>Serial.begin(speed)</code> <br><br><strong>Parameters</strong>: <li><strong><code>speed</code></strong>: Transmission speed (<strong>baudrate</strong>). Speed can only take the following values: <code>300, 1200, 2400, 4800, 9600, 14400, 19200, 28800,  38400, 57600, 115200</code></li></td></tr><tr><td><code>Serial.print()</code></td><td>Prints data to the serial port in ASCII format <br><br><strong>Syntax</strong>:<br><code>Serial.print(val)</code><br><code>Serial.print(val, format)</code><br><br><strong>Parameters</strong>: <li><strong><code>val</code></strong>: Value to print. The value can be of any type </li><strong><code>format</code></strong>: ASCII representation format (<code>DEC</code>, <code>HEX</code>, <code>OCT</code> o <code>BIN</code>).</td></tr><tr><td><code>Serial.available()</code></td><td>Gets the number of bytes (characters) available to read from the serial port. These are data that have already arrived and are stored in the serial receive buffer (which stores 64 bytes).<br><br><strong>Syntax</strong>:<br><code>Serial.available()</code><br><br><strong>Returned Values</strong>: Number of available bytes to read.</td></tr><tr><td><code>Serial.read()</code></td><td>Reads a data byte that comes in through the serial.<br><br><strong>Syntax</strong>:<br><code>Serial.read()</code><br><br><strong>Returned Values</strong>: First byte of the available serial data (or <code>-1</code> if no data is available). The data type read is <code>int</code>.</td></tr></tbody></table><p>Other functions of the API are summarized in the following table:</p><table><thead><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code>Serial.end()</code></td><td>Disables serial communication, allowing the <code>RX</code> and <code>TX</code> pins to be used as input and output (<code>I/O</code>) pins.</td></tr><tr><td><code>Serial.write(value)</code></td><td>Writes binary data to the serial port. The data is sent as a byte or a series of bytes (no human-readable: <code>raw</code>).</td></tr><tr><td><code>Serial.peek()</code></td><td>Allows reading without removing data. It returns the next byte  (as <code>int</code>) of the incoming serial data without removing it from the internal serial buffer (or <code>-1</code> if no data is available).</td></tr><tr><td><code>Serial.flush()</code></td><td>Waits until the transmission of outgoing serial data is complete.</td></tr><tr><td><code>serialEvent()</code></td><td>Function that is called when serial data is available. For more information, see the following link <a href="https://docs.arduino.cc/built-in-examples/communication/SerialEvent" target="_blank" rel="noopener noreferrer">link</a></td></tr></tbody></table><p>It is important to clarify that the following functions are part of the Arduino API. If you are using the ESP32, it is necessary to check if these functions have been ported to this platform on the <strong>Arduino core for the ESP32, ESP32-S2, ESP32-S3 and ESP32-C3</strong> page (<a href="https://docs.espressif.com/projects/arduino-esp32/en/latest/" target="_blank" rel="noopener noreferrer">link</a>). Otherwise, the programming model changes, and you will need to use the <strong>ESP-IDF Programming Guide</strong> (<a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/" target="_blank" rel="noopener noreferrer">link</a>). Fortunately, serial communication via <strong>UART</strong> is supported by the Arduino-ESP32 API (see <a href="https://docs.espressif.com/projects/arduino-esp32/en/latest/libraries.html" target="_blank" rel="noopener noreferrer">table</a>).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ports-used">Ports used<a class="hash-link" aria-label="Direct link to Ports used" title="Direct link to Ports used" href="/Material/docs/Theory/PerceptionLayer/section4#ports-used">​</a></h2><p>Before starting, it is necessary to determine the serial communication protocols supported by the microcontroller and the pins on which they are implemented. This can be done by reviewing the pinout diagram in the board&#x27;s documentation. The following shows the case for the Arduino UNO and ESP32 boards available in the laboratory:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="esp32">ESP32<a class="hash-link" aria-label="Direct link to ESP32" title="Direct link to ESP32" href="/Material/docs/Theory/PerceptionLayer/section4#esp32">​</a></h3><p>The following shows the pinout diagram of the <strong>NODEMCU ESP-32S</strong> board, which is available in the laboratory:</p><div class="custom-img-container"><img src="/Material/assets/images/nodemcu_32s_pin-d4220b510607ee71eb341ad4c0b36a35.png" alt="" class="custom-img custom-img"></div><p>If you consult the pin definition table in the datasheet of the <strong>Nodemcu-32s</strong> (<a href="https://docs.ai-thinker.com/_media/esp32/docs/nodemcu-32s_product_specification.pdf" target="_blank" rel="noopener noreferrer">link</a>), the pins of interest will be:</p><table><thead><tr><th>No.</th><th>Pin Name</th><th>Functional Description</th></tr></thead><tbody><tr><td>34</td><td><code>RX</code></td><td><code>GPIO3</code>, <code>U0RXD</code>, <code>CLK_OUT2</code></td></tr><tr><td>35</td><td><code>TX</code></td><td><code>GPIO1</code>, <code>U0TXD</code>, <code>CLK_OUT3</code>, <code>EMAC_RXD2</code></td></tr><tr><td>16</td><td><code>SD2</code></td><td><code>GPIO9</code>, <code>SD_DATA2</code>, <code>SPIHD</code>, <code>HS1_DATA2</code>, <code>U1RXD</code></td></tr><tr><td>17</td><td><code>SD3</code></td><td><code>GPIO10</code>, <code>SD_DATA3</code>, <code>SPIWP</code>, <code>HS1_DATA3</code>, <code>U1TXD</code></td></tr></tbody></table><p>The <code>TX</code> and <code>RX</code> pins are connected to the chip that performs the Serial to USB conversion, so they cannot be used for other purposes when they are being used for serial transmission in the application running on the board. For more information, you can consult the section <strong>Establish Serial Connection with ESP32</strong> (<a href="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/get-started/establish-serial-connection.html" target="_blank" rel="noopener noreferrer">link</a>).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="arduino-uno">Arduino UNO<a class="hash-link" aria-label="Direct link to Arduino UNO" title="Direct link to Arduino UNO" href="/Material/docs/Theory/PerceptionLayer/section4#arduino-uno">​</a></h3><p>The following shows the pinout diagram for the Arduino UNO (the other board available in the laboratory).</p><div class="custom-img-container"><img src="/Material/assets/images/Pinout-UNOrev3_latest-092ffe1feda7f5f7ba24d00546f9f353.png" alt="" class="custom-img custom-img"></div><p>For this case:</p><table><thead><tr><th>No.</th><th>Pin Name</th><th>Functional Description</th></tr></thead><tbody><tr><td><code>0</code></td><td><code>RX&lt;-0</code></td><td><code>D0/RX</code>, <code>PD0</code></td></tr><tr><td><code>1</code></td><td><code>TX-&gt;1</code></td><td><code>D1/TX</code>, <code>PD1</code></td></tr></tbody></table><p>Once these pins are connected, they should not be used as digital ports if the Arduino application uses the serial port.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aplications-of-serial-communication">Aplications of serial communication<a class="hash-link" aria-label="Direct link to Aplications of serial communication" title="Direct link to Aplications of serial communication" href="/Material/docs/Theory/PerceptionLayer/section4#aplications-of-serial-communication">​</a></h2><p>Any of the boards available in the laboratory has at least one serial port (UART or SUART). Through this port, it is possible to:</p><ol>
<li>
<p>The communication between two boards through the cross-connection of their transmission (<code>TX</code>) and reception (<code>RX</code>) pins (<a href="https://www.hackster.io/onedeadmatch/custom-uart-protocol-on-esp32-1e2fa4" target="_blank" rel="noopener noreferrer">link</a>).</p>
<div class="custom-img-container"><img src="/Material/assets/images/oscup_mcu_mcu-e24bce41f98d51990b31ab042dc6af1a.jpg" alt="" class="custom-img custom-img"></div>
</li>
<li>
<p>The communication between a board and the computer via USB (using a USB to Serial adapter), which is usually integrated into the boards (<a href="https://www.mathworks.com/help/supportpkg/arduinoio/ug/configure-setup-for-esp32-hardware.html" target="_blank" rel="noopener noreferrer">link</a>).</p>
<div class="custom-img-container"><img src="/Material/assets/images/esp32_usb-7e17a30e73c04e524da615f9f32c1924.png" alt="" class="custom-img custom-img"><div class="custom-caption">XXX</div></div>
</li>
</ol><p>When using the serial port, we mainly have two application scenarios:</p><ol>
<li>Debugging complex applications.</li>
<li>Communication and transmission of different types of information (commands, status, variable values, etc.) depending on the type of application being used.</li>
</ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenario-1---application-debugging">Scenario 1 - Application Debugging<a class="hash-link" aria-label="Direct link to Scenario 1 - Application Debugging" title="Direct link to Scenario 1 - Application Debugging" href="/Material/docs/Theory/PerceptionLayer/section4#scenario-1---application-debugging">​</a></h3><p>One of the most useful applications of the serial port is that it facilitates <strong>debugging</strong> applications. Through it, you can print <strong>log messages</strong> during runtime, which help verify the correct functioning of the program logic by using a program like the serial monitor or any similar software.</p><p>It is very common to print variables (which can indicate the status or value of a sensor, application messages, etc.).</p><p>In the following example (<a href="https://github.com/UdeA-IoT/clases-IoT_capa-percepcion_2023-2/tree/main/dia4/debug_esp32" target="_blank" rel="noopener noreferrer">link</a>), it is shown how to set up the following setup:</p><div class="custom-img-container"><img src="/Material/assets/images/esp32_debug-serial-6b22ba2c317c2eb0bdcc828610a6150b.png" alt="" class="custom-img custom-img"><div class="custom-caption">XXX</div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenario-2---communication-with-other-boards-and-with-the-pc">Scenario 2 - Communication with Other Boards and with the PC<a class="hash-link" aria-label="Direct link to Scenario 2 - Communication with Other Boards and with the PC" title="Direct link to Scenario 2 - Communication with Other Boards and with the PC" href="/Material/docs/Theory/PerceptionLayer/section4#scenario-2---communication-with-other-boards-and-with-the-pc">​</a></h3><p>Through read and write operations on the serial port, it is possible to transmit information to and from another hardware device that has a serial interface (another board, computer, or specific hardware).</p><p>To understand this, the following <a href="https://github.com/UdeA-IoT/clases-IoT_capa-percepcion_2023-2/tree/main/dia4/serial-esp32-arduino" target="_blank" rel="noopener noreferrer">directory</a> will explain step-by-step an application in which commands are sent via serial from the PC to the ESP32 for a simple task such as turning an LED on and off.</p><div class="custom-img-container"><img src="/Material/assets/images/comunicacion_serial-c2765c140e29e87c84486320b835a033.png" alt="" class="custom-img custom-img"><div class="custom-caption">XXX</div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Material/docs/Theory/PerceptionLayer/section3"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Section 3</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Theory/PerceptionLayer/section4#main-references">Main References</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Theory/PerceptionLayer/section4#serial-communication">Serial communication</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Theory/PerceptionLayer/section4#arduino-serial-communication-api">Arduino Serial Communication API</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Theory/PerceptionLayer/section4#ports-used">Ports used</a><ul><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Theory/PerceptionLayer/section4#esp32">ESP32</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Theory/PerceptionLayer/section4#arduino-uno">Arduino UNO</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Theory/PerceptionLayer/section4#aplications-of-serial-communication">Aplications of serial communication</a><ul><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Theory/PerceptionLayer/section4#scenario-1---application-debugging">Scenario 1 - Application Debugging</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Theory/PerceptionLayer/section4#scenario-2---communication-with-other-boards-and-with-the-pc">Scenario 2 - Communication with Other Boards and with the PC</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Material/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>
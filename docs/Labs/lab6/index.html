<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Labs/lab6" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Laboratory 6 | IoT_UdeA</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://dipato.github.io/Material/img/logoudea.png"><meta data-rh="true" name="twitter:image" content="https://dipato.github.io/Material/img/logoudea.png"><meta data-rh="true" property="og:url" content="https://dipato.github.io/Material/docs/Labs/lab6"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Laboratory 6 | IoT_UdeA"><meta data-rh="true" name="description" content="Summary"><meta data-rh="true" property="og:description" content="Summary"><link data-rh="true" rel="canonical" href="https://dipato.github.io/Material/docs/Labs/lab6"><link data-rh="true" rel="alternate" href="https://dipato.github.io/Material/docs/Labs/lab6" hreflang="en"><link data-rh="true" rel="alternate" href="https://dipato.github.io/Material/docs/Labs/lab6" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/Material/blog/rss.xml" title="IoT_UdeA RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Material/blog/atom.xml" title="IoT_UdeA Atom Feed"><link rel="stylesheet" href="/Material/assets/css/styles.53ef5efc.css">
<script src="/Material/assets/js/runtime~main.4ddb60ed.js" defer="defer"></script>
<script src="/Material/assets/js/main.137e0ac5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Material/"><div class="navbar__logo"><img src="/Material/img/logoudea.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Material/img/logoudea.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">IoT</b></a><a class="navbar__item navbar__link" href="/Material/docs/Theory/Introduction/definition">Theory</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Material/docs/Labs/lab1">Laboratory</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Material/docs/Labs/lab1">Laboratory 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Material/docs/Labs/lab2">Laboratory 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Material/docs/Labs/lab3">Laboratory 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Material/docs/Labs/lab4">Laboratory 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Material/docs/Labs/lab5">Laboratory 5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/Material/docs/Labs/lab6">Laboratory 6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Material/docs/Labs/lab7">Laboratory 7</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Material/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Laboratory 6</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Laboratory 6</h1>
<div style="text-align:justify"><h1>Activity 1 - Temperature and Humidity Measurement using the ESP32</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary" href="/Material/docs/Labs/lab6#summary">​</a></h2><p>Create an application that reads the temperature and humidity from a DHT11 sensor and prints the values using the serial monitor.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hardware">Hardware<a class="hash-link" aria-label="Direct link to Hardware" title="Direct link to Hardware" href="/Material/docs/Labs/lab6#hardware">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="components">Components<a class="hash-link" aria-label="Direct link to Components" title="Direct link to Components" href="/Material/docs/Labs/lab6#components">​</a></h3><p>The following table shows the main components of the circuit to be assembled:</p><table><thead><tr><th>Components</th><th>Quantity</th><th>Observations</th></tr></thead><tbody><tr><td>ESP32</td><td>1</td><td></td></tr><tr><td>DHT11 Temperature and Humidity Module</td><td>1</td><td>Available in Elegoo kit (<a href="https://cdn.sparkfun.com/assets/b/3/f/9/d/OKY3068-1.pdf" target="_blank" rel="noopener noreferrer">datasheet</a>)</td></tr></tbody></table><p>It is important to know the sensor pins. Below is a pinout map (<a href="https://components101.com/sensors/dht11-temperature-sensor" target="_blank" rel="noopener noreferrer">link</a>):</p><div class="custom-img-container"><img src="/Material/assets/images/DHT11–Temperature-Sensor-Pinout-35d5fd7f31d1cd12af079804f2c9cbed.jpg" alt="" class="custom-img custom-img"></div><p>The Elegoo kit includes a module that uses this sensor. It is shown below along with the description of the connection pins:</p><div class="custom-img-container"><img src="/Material/assets/images/pines_elegoo-51bd3a0e71a751fe4a750e70a62cf008.png" alt="" class="custom-img custom-img"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="schematics">Schematics<a class="hash-link" aria-label="Direct link to Schematics" title="Direct link to Schematics" href="/Material/docs/Labs/lab6#schematics">​</a></h3><div class="custom-img-container"><img src="/Material/assets/images/dh11-esp32_sch-e8822187c1c66216e01e48948d78241c.png" alt="" class="custom-img custom-img"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connection-diagram">Connection diagram<a class="hash-link" aria-label="Direct link to Connection diagram" title="Direct link to Connection diagram" href="/Material/docs/Labs/lab6#connection-diagram">​</a></h3><p>The connection between DHT11 sensor and the ESP32 is shown in the following table:</p><table><thead><tr><th>ESP32</th><th>DHT11</th></tr></thead><tbody><tr><td>P2 (GPIO2)</td><td>S</td></tr><tr><td>3.3V (VIN3.3V)</td><td>VSS</td></tr><tr><td>GND (GND)</td><td>GND</td></tr></tbody></table><p>The connection diagram is shown to follow:</p><div class="custom-img-container"><img src="/Material/assets/images/dh11-esp32_bb-15c560610b5955aaa8720ce922b093ce.jpg" alt="" class="custom-img custom-img"></div><blockquote>
<p><strong>Fritzing File</strong>
The example Fritzing file <strong>dh11-esp32.fzz</strong> can be download from <a href="/Material/assets/files/dh11-esp32-30d047455aee1b22ae4b79eaf1ed18df.fzz" target="_blank">[link]</a></p>
</blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="software">Software<a class="hash-link" aria-label="Direct link to Software" title="Direct link to Software" href="/Material/docs/Labs/lab6#software">​</a></h2><p>This example was coded and tested in the <strong>Arduino IDE v1</strong>. As a review, try to replicate the procedure in Platformio.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting">Setting<a class="hash-link" aria-label="Direct link to Setting" title="Direct link to Setting" href="/Material/docs/Labs/lab6#setting">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="used-libraries">Used libraries<a class="hash-link" aria-label="Direct link to Used libraries" title="Direct link to Used libraries" href="/Material/docs/Labs/lab6#used-libraries">​</a></h4><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>As mentioned at the beginning, this example was tested using the <strong>Arduino IDE v1</strong>. To carry out the installation in the new version of the <strong>Arduino IDE</strong> (<strong>Arduino v2</strong>), follow the same procedure using the instructions given on the <strong>Installing libraries - Arduino v2</strong> page (<a href="https://docs.arduino.cc/software/ide-v2/tutorials/ide-v2-installing-a-library/" target="_blank" rel="noopener noreferrer">link</a>).</p></div></div><p>The following libreries were added:</p><ul>
<li>
<p><strong>DHT</strong></p>
<div class="custom-img-container"><img src="/Material/assets/images/libreria_instalacion-51bf15d693cdbd8431748fd758a3e958.png" alt="" class="custom-img custom-img"></div>
</li>
<li>
<p><strong>Adafruit Unified Sensor</strong></p>
<div class="custom-img-container"><img src="/Material/assets/images/libreria_unified_instalacion-7433ad1a11bbcc67d2b1b4c92179e61f.png" alt="" class="custom-img custom-img"></div>
</li>
</ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="program">Program<a class="hash-link" aria-label="Direct link to Program" title="Direct link to Program" href="/Material/docs/Labs/lab6#program">​</a></h4><p>The coded program (<a href="/Material/assets/files/dth11_esp32-f13fb1987e0b16efec5ced32eaab56cd.ino" target="_blank">dth11_esp32.ino</a>) is shown to follow:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;DHT.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">DHTPIN</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">2</span><span class="token macro property expression" style="color:#36acaa">     </span><span class="token macro property comment" style="color:#999988;font-style:italic">// Digital pin connected to the DHT sensor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Feather HUZZAH ESP8266 note: use pins 3, 4, 5, 12, 13 or 14 --</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Pin 15 can work but DHT must be disconnected during program upload.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Uncomment whatever type you&#x27;re using!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">DHTTYPE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression" style="color:#36acaa">DHT11   </span><span class="token macro property comment" style="color:#999988;font-style:italic">// DHT 11</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//#define DHTTYPE DHT22   // DHT 22  (AM2302), AM2321</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//#define DHTTYPE DHT21   // DHT 21 (AM2301)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Connect pin 1 (on the left) of the sensor to +5V</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// NOTE: If using a board with 3.3V logic like an Arduino Due connect pin 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// to 3.3V instead of 5V!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Connect pin 2 of the sensor to whatever your DHTPIN is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Connect pin 3 (on the right) of the sensor to GROUND (if your sensor has 3 pins)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Connect pin 4 (on the right) of the sensor to GROUND and leave the pin 3 EMPTY (if your sensor has 4 pins)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Connect a 10K resistor from pin 2 (data) to pin 1 (power) of the sensor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Initialize DHT sensor.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Note that older versions of this library took an optional third parameter to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// tweak the timings for faster processors.  This parameter is no longer needed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// as the current DHT reading algorithm adjusts itself to work on faster procs.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DHT </span><span class="token function" style="color:#d73a49">dht</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DHTPIN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> DHTTYPE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">begin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">9600</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">F</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DHTxx test!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dht</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">begin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Wait a few seconds between measurements.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">delay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Reading temperature or humidity takes about 250 milliseconds!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Sensor readings may also be up to 2 seconds &#x27;old&#x27; (its a very slow sensor)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> h </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dht</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">readHumidity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Read temperature as Celsius (the default)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> t </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dht</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">readTemperature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Read temperature as Fahrenheit (isFahrenheit = true)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> f </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dht</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">readTemperature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Check if any reads failed and exit early (to try again).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">isnan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">h</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isnan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isnan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">F</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed to read from DHT sensor!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Compute heat index in Fahrenheit (the default)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> hif </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dht</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">computeHeatIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> h</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Compute heat index in Celsius (isFahreheit = false)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> hic </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dht</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">computeHeatIndex</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> h</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">F</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Humidity: &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">h</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">F</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;%  Temperature: &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">F</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;°C &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">F</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;°F  Heat index: &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hic</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">F</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;°C &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hif</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">F</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;°F&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="application-test">Application test<a class="hash-link" aria-label="Direct link to Application test" title="Direct link to Application test" href="/Material/docs/Labs/lab6#application-test">​</a></h4><p>When the application is tested, the output has the following format:</p><div class="custom-img-container"><img src="/Material/assets/images/esp32_dht11-serial-b4b4c81c5ebb336e4ddcc4ea79cb4925.png" alt="" class="custom-img custom-img"></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-resources">Other resources<a class="hash-link" aria-label="Direct link to Other resources" title="Direct link to Other resources" href="/Material/docs/Labs/lab6#other-resources">​</a></h2><blockquote>
<p><strong>Online simulation</strong>
The simulation of the downloaded program can be found in (<a href="https://wokwi.com/projects/357776308749643777" target="_blank" rel="noopener noreferrer">link</a>)</p>
</blockquote><h1>Activity 2 - Connecting a 4x4 Matrix Keypad to an ESP32</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary-1">Summary<a class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary" href="/Material/docs/Labs/lab6#summary-1">​</a></h2><p>Create an application for the ESP32 that serially displays all the keys from a 4x4 matrix keypad except for the <strong><code>#</code></strong> and <strong><code>*</code></strong> keys. When either of these keys is pressed, the built-in LED on the board will turn on and off in such a way that one key turns it off, and the other key turns it on.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hardware-1">Hardware<a class="hash-link" aria-label="Direct link to Hardware" title="Direct link to Hardware" href="/Material/docs/Labs/lab6#hardware-1">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="components-1">Components<a class="hash-link" aria-label="Direct link to Components" title="Direct link to Components" href="/Material/docs/Labs/lab6#components-1">​</a></h3><p>The following table shows the main components to be used in the circuit:</p><table><thead><tr><th>Components</th><th>Quantity</th><th>Observations</th></tr></thead><tbody><tr><td>ESP32</td><td>1</td><td></td></tr><tr><td>Membrane Matrix Keypad</td><td>1</td><td>Available in Elegoo kit (<a href="https://cdn.sparkfun.com/assets/f/f/a/5/0/DS-16038.pdf" target="_blank" rel="noopener noreferrer">datasheet</a>)</td></tr></tbody></table><p>It is important to know the pins of the matrix keypad before starting. Below is a pinout map:</p><div class="custom-img-container"><img src="/Material/assets/images/esp32_keypad_bb-8cb1f9f2ef7b06564eada67aada96e8a.png" alt="" class="custom-img custom-img"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="schematics-1">Schematics<a class="hash-link" aria-label="Direct link to Schematics" title="Direct link to Schematics" href="/Material/docs/Labs/lab6#schematics-1">​</a></h3><div class="custom-img-container"><img src="/Material/assets/images/esp32_keypad_sch-57b674bc29a662b8ba684a3e0e04598b.png" alt="" class="custom-img custom-img"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connection-diagram-1">Connection diagram<a class="hash-link" aria-label="Direct link to Connection diagram" title="Direct link to Connection diagram" href="/Material/docs/Labs/lab6#connection-diagram-1">​</a></h3><p>The connection between the 4x4 membrane matrix keypad and the ESP32 is shown in the following table:</p><table><thead><tr><th>ESP32</th><th>4x4 Matrix Keypad</th></tr></thead><tbody><tr><td>P23 (GPIO23)</td><td>R1</td></tr><tr><td>P22 (GPIO22)</td><td>R2</td></tr><tr><td>P21 (GPIO21)</td><td>R3</td></tr><tr><td>P19 (GPIO19)</td><td>R4</td></tr><tr><td>P5 (GPIO5)</td><td>C1</td></tr><tr><td>P17 (GPIO17)</td><td>C2</td></tr><tr><td>P16 (GPIO16)</td><td>C3</td></tr><tr><td>P4 (GPIO4)</td><td>C4</td></tr></tbody></table><blockquote>
<p><strong>Fritzing file</strong>
The Fritzing file related to the project is <strong>esp32_keypad.fzz</strong> <a href="/Material/assets/files/esp32_keypad-a051af55066a269e5178e8d6047da7e8.fzz" target="_blank">[download]</a></p>
</blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="software-1">Software<a class="hash-link" aria-label="Direct link to Software" title="Direct link to Software" href="/Material/docs/Labs/lab6#software-1">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="platformio-setting">Platformio setting<a class="hash-link" aria-label="Direct link to Platformio setting" title="Direct link to Platformio setting" href="/Material/docs/Labs/lab6#platformio-setting">​</a></h3><ol>
<li>
<p>Create and configure the project (in our case it was named <strong>test-keypad_ESP32</strong>), using the following parameters:</p>
<table><thead><tr><th>Parameter</th><th>Value</th></tr></thead><tbody><tr><td><strong>Name</strong></td><td>test-keypad_ESP32</td></tr><tr><td><strong>Board</strong></td><td>NodeMCU-32S</td></tr><tr><td><strong>Framework</strong></td><td>Arduino</td></tr></tbody></table>
</li>
<li>
<p>Add the necessary libraries and their dependencies (the latter is done automatically). In our case, we installed the <strong>Keypad</strong> library. To do this, follow these steps:</p>
<ul>
<li>Search for the library by name (<strong>Keypad</strong> in our case). If everything is correct, a list of libraries will appear:</li>
</ul>
<div class="custom-img-container"><img src="/Material/assets/images/example_keypad2-1db9c9f2572834af10f454e0653657ef.png" alt="" class="custom-img custom-img"></div>
<ul>
<li>Select the library you want to add from the list (<strong>Keypad</strong> in our case), then proceed to add it to the project..</li>
</ul>
<div class="custom-img-container"><img src="/Material/assets/images/example_keypad3-0298111ae4bbdb1bbb30a1b858d3f3a8.png" alt="" class="custom-img custom-img"></div>
<ul>
<li>From the list of projects that appear, select the project to which you want to add the library. For this example, the project to choose is <strong>test-keypad_ESP32</strong>.</li>
</ul>
<div class="custom-img-container"><img src="/Material/assets/images/example_keypad4-e24fb2a015088c9ed4ae25f7a8ea88f2.png" alt="" class="custom-img custom-img"></div>
<p>Once the process of adding the necessary libraries is complete, the <a href="/Material/assets/files/platformio-765d29e1a9cb2d5b35e26036c86f5a0a.ini" target="_blank"><strong>platformio.ini</strong></a> file is updated with the library information.</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">; PlatformIO Project Configuration File</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;   Build options: build flags, source filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;   Upload options: custom upload port, speed and extra flags</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;   Library options: dependencies, extra library storages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;   Advanced options: extra scripting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; Please visit documentation for the other options and examples</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; https://docs.platformio.org/page/projectconf.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[env:nodemcu-32s]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">platform = espressif32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">board = nodemcu-32s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">framework = arduino</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lib_deps = chris--a/Keypad@^3.1.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Proceed to code the program in the <a href="/Material/assets/files/main-29f8d6cee2cd847de0bf436846fd2af7.cpp" target="_blank"><strong>main.cpp</strong></a> file. For our case, it looks as follows::</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;Arduino.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;Keypad.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> byte ROWS </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Four rows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> byte COLS </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Three columns</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Define the Keymap</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> keys</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ROWS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">COLS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token char">&#x27;1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token char">&#x27;2&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token char">&#x27;3&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token char">&#x27;A&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token char">&#x27;4&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token char">&#x27;5&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token char">&#x27;6&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token char">&#x27;B&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token char">&#x27;7&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token char">&#x27;8&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token char">&#x27;9&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token char">&#x27;C&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token char">&#x27;#&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token char">&#x27;0&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token char">&#x27;*&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token char">&#x27;D&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Conections ESP32 - Keypad</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">ROW1</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">23</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">ROW2</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">22</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">ROW3</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">21</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">ROW4</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">19</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">COL1</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">COL2</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">17</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">COL3</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">16</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">COL4</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Connect keypad ROW1, ROW2, ROW3 and ROW4 to these Arduino pins.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">byte rowPins</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ROWS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> ROW1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ROW2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ROW3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ROW4 </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Connect keypad COL0, COL1, COL2 and COL3 to these Arduino pins.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">byte colPins</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">COLS</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> COL1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> COL2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> COL3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> COL4 </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Create the Keypad</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Keypad kpd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Keypad</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">makeKeymap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keys</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rowPins</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> colPins</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ROWS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> COLS </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ledpin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">pinMode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ledpin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">OUTPUT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">digitalWrite</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ledpin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> HIGH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">begin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">9600</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;System Ok...&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">char</span><span class="token plain"> key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> kpd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Check for a valid key.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token char">&#x27;*&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">digitalWrite</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ledpin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> LOW</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token char">&#x27;#&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">digitalWrite</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ledpin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> HIGH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">default</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Compile the program to check for errors.</p>
</li>
</ol><div class="custom-img-container"><img src="/Material/assets/images/example_keypad5-49b592ea515a4e744fd490a4a464d986.png" alt="" class="custom-img custom-img"></div><ol start="5">
<li>If there are no errors, proceed to upload the program to the ESP32.</li>
</ol><div class="custom-img-container"><img src="/Material/assets/images/example_keypad6-b5a0886a4adc67bc077305c4f76e2958.png" alt="" class="custom-img custom-img"></div><ol start="6">
<li>If everything goes well, you can proceed to test the program. Since the example uses serial communication, open the serial terminal:</li>
</ol><div class="custom-img-container"><img src="/Material/assets/images/example_keypad8-d5a816cbb4ef2a335ad33683addded8f.png" alt="" class="custom-img custom-img"></div><p>To exit the serial terminal, use the key combination <strong><code>CTRL</code> + <code>C</code></strong>.</p><p>Optionally, you can also use the <strong>serial monitor</strong> for better debugging. The following figure shows this:</p><div class="custom-img-container"><img src="/Material/assets/images/example_keypad9-348f395a1584b309d13bcd7cdf4eb105.png" alt="" class="custom-img custom-img"></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="other-resources-1">Other resources<a class="hash-link" aria-label="Direct link to Other resources" title="Direct link to Other resources" href="/Material/docs/Labs/lab6#other-resources-1">​</a></h2><blockquote>
<p><strong>Online simulation</strong>
The simulation of the downloaded program can be found in (<a href="https://wokwi.com/projects/375583898825876481" target="_blank" rel="noopener noreferrer">link</a>)</p>
</blockquote><h1>Activity 3 - Handling the LCD</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="before-to-start">Before to start<a class="hash-link" aria-label="Direct link to Before to start" title="Direct link to Before to start" href="/Material/docs/Labs/lab6#before-to-start">​</a></h2><p>Main references:</p><ol>
<li><strong>Microcontroladores PIC - Programación en BASIC: componentes-adicionales</strong> (<a href="https://www.mikroe.com/ebooks/microcontroladores-pic-programacion-en-basic/componentes-adicionales" target="_blank" rel="noopener noreferrer">link</a>)</li>
<li><strong>Character LCDs - Adafruit</strong> (<a href="https://learn.adafruit.com/character-lcds" target="_blank" rel="noopener noreferrer">link</a>)</li>
<li><strong>Basic Character LCD Hookup Guide - Sparkfun</strong> (<a href="https://learn.sparkfun.com/tutorials/basic-character-lcd-hookup-guide/all" target="_blank" rel="noopener noreferrer">link</a>)</li>
<li><strong>Random Nerd Tutorials</strong> (<a href="https://randomnerdtutorials.com/projects-arduino/" target="_blank" rel="noopener noreferrer">link</a>)</li>
<li><strong>SparkFun Inventor&#x27;s Kit Experiment Guide - v4.0 --&gt; Project 4: Display</strong> (<a href="https://learn.sparkfun.com/tutorials/sparkfun-inventors-kit-experiment-guide---v40/project-4-display" target="_blank" rel="noopener noreferrer">link</a>)</li>
</ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-lcd-displays">About LCD displays<a class="hash-link" aria-label="Direct link to About LCD displays" title="Direct link to About LCD displays" href="/Material/docs/Labs/lab6#about-lcd-displays">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pins-and-connection">Pins and connection<a class="hash-link" aria-label="Direct link to Pins and connection" title="Direct link to Pins and connection" href="/Material/docs/Labs/lab6#pins-and-connection">​</a></h3><p>The following figure shows a 16x2 LCD with its respective interface pins:</p><div class="custom-img-container"><img src="/Material/assets/images/LCD_16x2-98241cb1913a0612ca6ffe7559aa0362.png" alt="" class="custom-img custom-img"></div><p>The description of each pin is shown in the following table:</p><table><thead><tr><th>Function</th><th>Pin</th><th>Name</th><th style="text-align:center">Logical State</th><th>Description</th></tr></thead><tbody><tr><td>Ground (<strong>GND</strong>)</td><td>1</td><td><strong>VSS</strong></td><td style="text-align:center">-</td><td>0V</td></tr><tr><td>Power Supply</td><td>2</td><td><strong>VDD</strong></td><td style="text-align:center">-</td><td>+5V</td></tr><tr><td>Contrast</td><td>3</td><td><strong>VEE</strong> or <strong>V0</strong></td><td style="text-align:center">-</td><td>0 - VDD</td></tr><tr><td>Function Control</td><td>4</td><td><strong>RS</strong></td><td style="text-align:center">0/1</td><td><li><strong>RS=0</strong>: D0 – D7 considered as commands</li><li><strong>RS=1</strong>: D0 – D7 considered as data</li></td></tr><tr><td>Function Control</td><td>5</td><td><strong>R/W</strong></td><td style="text-align:center">0/1</td><td><li><strong>RS=0</strong>: Write data (from microcontroller to LCD)</li><li><strong>RS=1</strong>: Read data (from LCD to microcontroller)</li></td></tr><tr><td>Function Control</td><td>6</td><td><strong>E</strong></td><td style="text-align:center">Transition from 0 to 1</td><td><li><strong>E=0</strong>: LCD display access disabled</li><li><strong>E=1</strong>: Normal operation, data/commands being transmitted to the LCD</li></td></tr><tr><td>Data / Commands</td><td>7</td><td><strong>D0</strong></td><td style="text-align:center">0 / 1</td><td>Bit 0 LSB</td></tr><tr><td>Data / Commands</td><td>8</td><td><strong>D1</strong></td><td style="text-align:center">0 / 1</td><td>Bit 1</td></tr><tr><td>Data / Commands</td><td>9</td><td><strong>D2</strong></td><td style="text-align:center">0 / 1</td><td>Bit 2</td></tr><tr><td>Data / Commands</td><td>10</td><td><strong>D3</strong></td><td style="text-align:center">0 / 1</td><td>Bit 3</td></tr><tr><td>Data / Commands</td><td>11</td><td><strong>D4</strong></td><td style="text-align:center">0 / 1</td><td>Bit 4</td></tr><tr><td>Data / Commands</td><td>12</td><td><strong>D5</strong></td><td style="text-align:center">0 / 1</td><td>Bit 5</td></tr><tr><td>Data / Commands</td><td>13</td><td><strong>D6</strong></td><td style="text-align:center">0 / 1</td><td>Bit 6</td></tr><tr><td>Data / Commands</td><td>14</td><td><strong>D7</strong></td><td style="text-align:center">0 / 1</td><td>Bit 7 MSB</td></tr><tr><td>Positive Power Supply for Backlight</td><td>15</td><td><strong>K</strong></td><td style="text-align:center">-</td><td>0V</td></tr><tr><td>Negative Power Supply for Backlight</td><td>16</td><td><strong>A</strong></td><td style="text-align:center">-</td><td>+5V</td></tr></tbody></table><p>The following figure shows the typical connection between an LCD and a microcontroller:</p><div class="custom-img-container"><img src="/Material/assets/images/conexion_LCD-5aacbef43fe5ecf33d32087f371238eb.gif" alt="" class="custom-img custom-img"></div><p>As highlighted in the figure, it is possible to use all the LCD data lines or not, depending on the type of connection, which can be:</p><ul>
<li><strong>4-line connection</strong>: The least significant data bits (<strong>D0-D3</strong>) are not connected.</li>
<li><strong>8-line connection</strong>: All pins associated with the data bits are connected.</li>
</ul><p>The LCD displays commonly used typically employ the <strong>Hitachi HD44780</strong> controller. The datasheet for the Hitachi HD44780 controller (<a href="https://www.sparkfun.com/datasheets/LCD/HD44780.pdf" target="_blank" rel="noopener noreferrer">link</a>) contains all the information about the structure, communication, and control of the LCD and is therefore an essential guide when designing a driver from scratch. Studying this information goes beyond the objectives of this guide (and it&#x27;s quite complex), so it won&#x27;t be covered in detail. However, it is useful to discuss some basic aspects of the Hitachi controller.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="memory-of-hitachi-hd44780-controller">Memory of Hitachi HD44780 controller<a class="hash-link" aria-label="Direct link to Memory of Hitachi HD44780 controller" title="Direct link to Memory of Hitachi HD44780 controller" href="/Material/docs/Labs/lab6#memory-of-hitachi-hd44780-controller">​</a></h3><p>The Hitachi HD44780 controller has three main memory locations:</p><ul>
<li><strong>DDRAM (Data Display Random Access Memory)</strong>: The DDRAM is used to store the characters to be displayed. It has a capacity to store 80 characters.</li>
</ul><div class="custom-img-container"><img src="/Material/assets/images/ddram-196f753fe6eb3347dd561dfdd81596e4.png" alt="" class="custom-img custom-img"></div><ul>
<li><strong>CGROM (Character Generation Read Only Memory)</strong>: This memory contains a standard map of all the characters that can be displayed on the screen. Each character is assigned a memory location, and the addresses of each character correspond to the numbers of the ASCII characters (<a href="https://www.asciitable.com/" target="_blank" rel="noopener noreferrer">ASCII table</a>):</li>
</ul><div class="custom-img-container"><img src="/Material/assets/images/cgrom-24b7d865061e0ea1c6a62f355d0e9309.gif" alt="" class="custom-img custom-img"></div><ul>
<li><strong>CGRAM (Character Generation Random Access Memory)</strong>: In this 64-byte region, user-defined (custom) characters are stored. The user can define up to 8 characters of 5x8 pixels. For this, the 5 lowest bits of each 8-bit register are used to define the dark points (1) of each row that make up the character, which consists of a total of eight rows (registers).</li>
</ul><div class="custom-img-container"><img src="/Material/assets/images/cgram-9c13ae33191bd6aa2596dfee92891fac.gif" alt="" class="custom-img custom-img"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-commands">Basic commands<a class="hash-link" aria-label="Direct link to Basic commands" title="Direct link to Basic commands" href="/Material/docs/Labs/lab6#basic-commands">​</a></h3><p>All data transmitted to an LCD display via the D0-D7 pins will be interpreted as a command or data depending on the logical state of the <strong>RS</strong> pin:</p><ul>
<li><strong>RS = 1</strong>: The D0 - D7 bits are addresses of the characters to be displayed. In this case, the LCD controller addresses a selected character and displays it at the specified address in the DDRAM, which is defined before transmitting the character, or otherwise, it is based on the address of the previously transmitted character, which increments automatically.</li>
<li><strong>RS = 0</strong>: The D0 - D7 bits are used as commands to set the display mode.</li>
</ul><p>The following table shows a command line for the LCD:</p><table><thead><tr><th>Comando</th><th>RS</th><th>RW</th><th>D7</th><th>D6</th><th>D5</th><th>D4</th><th>D3</th><th>D2</th><th>D1</th><th>D0</th></tr></thead><tbody><tr><td>Borrar el visualizador</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>Poner el cursor al inicio</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>x</td></tr><tr><td>Modo de entrada</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>I/D</td><td>S</td></tr><tr><td>Activar/desactivar el visualizador</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>D</td><td>U</td><td>B</td></tr><tr><td>Desplazar el cursor/visualizador</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>D/C</td><td>R/L</td><td>x</td><td>x</td></tr><tr><td>Modo de funcionamiento</td><td>0</td><td>0</td><td>0</td><td>0</td><td>1</td><td>DL</td><td>N</td><td>F</td><td>x</td><td>x</td></tr><tr><td>Establecer la dirección CGRAM</td><td>0</td><td>0</td><td>0</td><td>1</td><td colspan="7">Dirección CGRAM</td></tr><tr><td>Establecer la dirección DDRAM</td><td>0</td><td>0</td><td>1</td><td colspan="8">Dirección DDRAM</td></tr><tr><td>Leer la bandera &quot;BUSY&quot;(ocupado) (BF)</td><td>0</td><td>1</td><td>BF</td><td colspan="8">Dirección DDRAM</td></tr><tr><td>Escribir en la CGRAM o en la DDRAM</td><td>1</td><td>0</td><td>D7</td><td>D6</td><td>D5</td><td>D4</td><td>D3</td><td>D2</td><td>D1</td><td>D0</td></tr><tr><td>Leer la CGRAM o la DDRAM</td><td>1</td><td>1</td><td>D7</td><td>D6</td><td>D5</td><td>D4</td><td>D3</td><td>D2</td><td>D1</td><td>D0</td></tr></tbody></table><p><strong>Donde</strong>:</p><blockquote>
<ul>
<li><strong>I/D</strong>
<ul>
<li>1 = Incremento (por 1)</li>
<li>0 = Decremento (por 1)</li>
</ul>
</li>
<li><strong>R/L</strong>
<ul>
<li>1 = Desplazamiento a la derecha</li>
<li>0 = Desplazamiento a la izquierda</li>
</ul>
</li>
<li><strong>S</strong>
<ul>
<li>1 = Desplazamiento del visualizador activado</li>
<li>0 = Desplazamiento del visualizador desactivado</li>
</ul>
</li>
<li><strong>DL</strong>
<ul>
<li>1 = Bus de datos de 8 bits</li>
<li>0 = Bus de datos de 4 bits</li>
</ul>
</li>
<li><strong>D</strong>
<ul>
<li>1 = Visualizador encendido</li>
<li>0 = Visualizador apagado</li>
</ul>
</li>
<li><strong>N</strong>
<ul>
<li>1 = Visualizar en dos lineas</li>
<li>0 = Visualizar en una linea</li>
</ul>
</li>
<li><strong>U</strong>
<ul>
<li>1 = Cursor activado</li>
<li>0 = Cursor desactivado</li>
</ul>
</li>
<li><strong>F</strong>
<ul>
<li>1 = Carácter de 5x8 puntos</li>
<li>0 = Carácter de 5x7 puntos</li>
</ul>
</li>
<li><strong>B</strong>
<ul>
<li>1 = Parpadeo del cursor encendido</li>
<li>0 = Parpadeo del cursor apagado</li>
</ul>
</li>
<li><strong>D/C</strong>
<ul>
<li>1 = Desplazamiento del visualizador</li>
<li>0 = Desplazamiento del cursor</li>
</ul>
</li>
</ul>
</blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="busy-flag-bf---busy-flag">Busy Flag (BF - BUSY FLAG)<a class="hash-link" aria-label="Direct link to Busy Flag (BF - BUSY FLAG)" title="Direct link to Busy Flag (BF - BUSY FLAG)" href="/Material/docs/Labs/lab6#busy-flag-bf---busy-flag">​</a></h3><p>This signal indicates that the display is ready to receive the next data after a command has been executed. This signal can be read from the D7 line, and when its value is 0V (<strong>BF=0</strong>), it indicates that the display is ready to receive a new command.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="handling-the-lcd-using-arduino">Handling the LCD using Arduino<a class="hash-link" aria-label="Direct link to Handling the LCD using Arduino" title="Direct link to Handling the LCD using Arduino" href="/Material/docs/Labs/lab6#handling-the-lcd-using-arduino">​</a></h2><p>Fortunately, it is not necessary to implement all the above logic, as this would involve designing the driver.</p><p>The functions for controlling the character LCD are found in the <strong>LiquidCrystal</strong> library for Arduino (<a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/" target="_blank" rel="noopener noreferrer">link</a>). Fortunately, these also work for the ESP32.</p><table><thead><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/liquidcrystal/" target="_blank" rel="noopener noreferrer"><code>LiquidCrystal()</code></a></td><td>Creates a <code>LiquidCrystal</code> object to control the display. The display can be controlled using a 4-line connection (leaving <strong>D0-D3</strong> unconnected) or an 8-line connection. Additionally, the <strong>RW</strong> pin can be omitted as a parameter of the function<br><br><strong>Syntax</strong>:<br><code>LiquidCrystal(rs, enable, d4, d5, d6, d7)</code> <br><code>LiquidCrystal(rs, rw, enable, d4, d5, d6, d7)</code><br><code>LiquidCrystal(rs, enable, d0, d1, d2, d3, d4, d5, d6, d7)</code><br><code>LiquidCrystal(rs, rw, enable, d0, d1, d2, d3, d4, d5, d6, d7)</code><br><br><strong>Parameters</strong>: <li><strong><code>rs</code></strong>: Arduino pin number connected to the LCD <strong>RS</strong> pin </li><li><strong><code>rw</code></strong>: Arduino pin number connected to the LCD <strong>RW</strong> pin </li><li><strong><code>enable</code></strong>: Arduino pin number connected to the LCD <strong>E</strong> pin </li><li><strong><code>d0, d1, d2, d3, d4, d5, d6, d7</code></strong>: Arduino pin numbers connected to the corresponding data bus pins of the LCD. The <code>d0, d1, d2, d3</code> parameters are optional and omitted when the LCD is connected to the Arduino using four lines.</li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/begin/" target="_blank" rel="noopener noreferrer"><code>begin()</code></a></td><td>Specifies the type of display to be used by indicating its dimensions (rows and columns).<br><br><strong>Syntax</strong>:<br><code>lcd.begin(cols, rows)</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable tipo <code>LiquidCrystal</code>.</li><li><strong><code>cols</code></strong>: Number of columns in the display.</li><li><strong><code>rows</code></strong>: Number of rows in the display.</li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/clear/" target="_blank" rel="noopener noreferrer"><code>clear()</code></a></td><td>Clears the LCD screen and positions the cursor in the upper-left corner.<br><br><strong>Syntax</strong>:<br><code>lcd.clear()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/home/" target="_blank" rel="noopener noreferrer"><code>home()</code></a></td><td>Positions the cursor in the upper-left corner of the LCD screen.<br><br><strong>Syntax</strong>:<br><code>lcd.home()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/setcursor/" target="_blank" rel="noopener noreferrer"><code>setCursor()</code></a></td><td>Specifies the position where the cursor will be placed<br><br><strong>Syntax</strong>:<br><code>lcd.setCursor(col, row)</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code>.</li><li><strong><code>col</code></strong>: Column where the cursor will be placed (0 being the first column).</li><li><strong><code>row</code></strong>: Row where the cursor will be placed (0 being the first row).</li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/write/" target="_blank" rel="noopener noreferrer"><code>write()</code></a></td><td>Writes a character to the LCD<br><br><strong>Syntax</strong>:<br><code>lcd.write(data)</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable tipo <code>LiquidCrystal</code>.</li><li><strong><code>data</code></strong>: Character to be written on the display.</li><strong>Return</strong>: Number of bytes written</td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/print/" target="_blank" rel="noopener noreferrer"><code>print()</code></a></td><td>Prints text to the LCD<br><br><strong>Syntax</strong>:<br><code>lcd.print(data)</code><br><code>lcd.print(data,BASE)</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code>.</li><li><strong><code>data</code></strong>: Data to be printed (<code>char</code>, <code>byte</code>, <code>int</code>, <code>long</code>, or <code>string</code>).</li><li><strong><code>BASE</code></strong>: Optional parameter to define the <strong>BASE</strong> in which numbers are displayed (<code>BIN</code>, <code>DEC</code>, <code>OCT</code>, <code>HEX</code>, or <code>string</code>).</li><strong>Return</strong>: Number of bytes written</td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/print/" target="_blank" rel="noopener noreferrer"><code>cursor()</code></a></td><td>Displays the cursor on the LCD<br><br><strong>Syntax</strong>:<br><code>lcd.cursor()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/nocursor/" target="_blank" rel="noopener noreferrer"><code>noCursor()</code></a></td><td>Hides the cursor<br><br><strong>Syntax</strong>:<br><code>lcd.noCursor()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/blink/" target="_blank" rel="noopener noreferrer"><code>blink()</code></a></td><td>Display a blinking cursor on the LCD<br><br><strong>Syntax</strong>:<br><code>lcd.blink()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/noblink/" target="_blank" rel="noopener noreferrer"><code>noBlink()</code></a></td><td>Turns off the blinking cursor<br><br><strong>Syntax</strong>:<br><code>lcd.noBlink()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/display/" target="_blank" rel="noopener noreferrer"><code>display()</code></a></td><td>Turns on the LCD screen after turning it off with <code>noDisplay()</code>.<br><br><strong>Syntax</strong>:<br><code>lcd.display()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/nodisplay/" target="_blank" rel="noopener noreferrer"><code>noDisplay()</code></a></td><td>Turns off the LCD screen. The text on the screen is not lost.<br><br><strong>Syntax</strong>:<br><code>lcd.noDisplay()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/scrolldisplayleft/" target="_blank" rel="noopener noreferrer"><code>scrollDisplayLeft()</code></a></td><td>Scrolls the display content (text and cursor) one space to the left.<br><br><strong>Syntax</strong>:<br><code>lcd.scrollDisplayLeft()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/scrolldisplayright/" target="_blank" rel="noopener noreferrer"><code>scrollDisplayRight()</code></a></td><td>Scrolls the display content (text and cursor) one space to the right.<br><br><strong>Syntax</strong>:<br><code>lcd.scrollDisplayRight()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/autoscroll/" target="_blank" rel="noopener noreferrer"><code>autoScroll()</code></a></td><td>Enables automatic scrolling of the display content.<br><br><strong>Syntax</strong>:<br><code>lcd.autoScroll()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/noautoscroll/" target="_blank" rel="noopener noreferrer"><code>noAutoScroll()</code></a></td><td>Disables automatic scrolling of the display content.<br><br><strong>Syntax</strong>:<br><code>lcd.noAutoScroll()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/lefttoright/" target="_blank" rel="noopener noreferrer"><code>leftToRight()</code></a></td><td>Sets the text writing direction on the display to left-to-right (default).<br><br><strong>Syntax</strong>:<br><code>lcd.leftToRight()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/righttoleft/" target="_blank" rel="noopener noreferrer"><code>rightToLeft()</code></a></td><td>Sets the text writing direction on the display to right-to-left.<br><br><strong>Syntax</strong>:<br><code>lcd.rightToLeft()</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable tipo <code>LiquidCrystal</code></li></td></tr><tr><td><a href="https://www.arduino.cc/reference/en/libraries/liquidcrystal/createchar/" target="_blank" rel="noopener noreferrer"><code>createChar()</code></a></td><td>Creates a custom character (glyph) to be used on the LCD. Up to eight 5x8 pixel characters are supported (numbered 0 to 7). The appearance of each character is defined in an array of 8 bytes, one for each row. The five least significant bits of each byte determine the pixels in that row. To display a custom character on the screen, use the <code>write</code> function with the number of the custom character (0-7) that you want to display.<br><br><strong>Syntax</strong>:<br><code>lcd.createChar(num, data)</code><br><br><strong>Parameters</strong>: <li><strong><code>lcd</code></strong>: Variable type <code>LiquidCrystal</code></li><li><strong><code>num</code></strong>: Number of the character to create (0-7) </li><li><strong><code>data</code></strong>: Pixel matrix of the data to be created </li></td></tr></tbody></table><p>As support tools to facilitate the generation of custom characters, the following are recommended:</p><ol>
<li>Custom Character Generator for HD44780 LCD Modules (<a href="http://omerk.github.io/lcdchargen/" target="_blank" rel="noopener noreferrer">link</a>)</li>
<li>HD44780 LCD User-Defined Graphics (<a href="https://www.quinapalus.com/hd44780udg.html" target="_blank" rel="noopener noreferrer">link</a>)</li>
</ol><h1>Activity 3 - Temperature and Humidity Measurement Using the ESP32 with Display on an LCD</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary-2">Summary<a class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary" href="/Material/docs/Labs/lab6#summary-2">​</a></h2><p>Create an application that displays the temperature and humidity obtained from a DHT11 sensor on an LCD display. It is recommended to use the serial port for debugging the application.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hardware-2">Hardware<a class="hash-link" aria-label="Direct link to Hardware" title="Direct link to Hardware" href="/Material/docs/Labs/lab6#hardware-2">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="components-2">Components<a class="hash-link" aria-label="Direct link to Components" title="Direct link to Components" href="/Material/docs/Labs/lab6#components-2">​</a></h3><p>The following table shows the main components of the circuit to be assembled.:</p><table><thead><tr><th>Components</th><th>Quantity</th><th>Observations</th></tr></thead><tbody><tr><td>ESP32</td><td>1</td><td></td></tr><tr><td>DHT11 Temperature and Humidity Module</td><td>1</td><td>Available in Elegoo kit (<a href="https://cdn.sparkfun.com/assets/b/3/f/9/d/OKY3068-1.pdf" target="_blank" rel="noopener noreferrer">datasheet</a>)</td></tr><tr><td>LCD 1602 Module</td><td>1</td><td>Available in Elegoo kit (<a href="https://www.waveshare.com/datasheet/LCD_en_PDF/LCD1602.pdf" target="_blank" rel="noopener noreferrer">datasheet</a>)</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="schematics-2">Schematics<a class="hash-link" aria-label="Direct link to Schematics" title="Direct link to Schematics" href="/Material/docs/Labs/lab6#schematics-2">​</a></h3><div class="custom-img-container"><img src="/Material/assets/images/dh11_lcd-esp32_sch-14e73a8d92a9bd8aa8f8c36653b42c06.png" alt="" class="custom-img custom-img"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connection-diagram-2">Connection diagram<a class="hash-link" aria-label="Direct link to Connection diagram" title="Direct link to Connection diagram" href="/Material/docs/Labs/lab6#connection-diagram-2">​</a></h3><p>The connection between the sensor, the ESP32, and the external hardware modules is shown below:</p><div class="custom-img-container"><img src="/Material/assets/images/dh11_lcd-esp32_bb-2dffa4b165b71371a929e50607f2a796.png" alt="" class="custom-img custom-img"></div><blockquote>
<p><strong>Fritzing file</strong></p>
<p>The example Fritzing file <strong>dh11_lcd-esp32.fzz</strong> can be downloaded from <a href="/Material/assets/files/dh11_lcd-esp32-c0e66760f7ad051250f8329c6fdc728a.fzz" target="_blank">[link]</a></p>
</blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="software-2">Software<a class="hash-link" aria-label="Direct link to Software" title="Direct link to Software" href="/Material/docs/Labs/lab6#software-2">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="program-1">Program<a class="hash-link" aria-label="Direct link to Program" title="Direct link to Program" href="/Material/docs/Labs/lab6#program-1">​</a></h4><p>The coded program is shown to follow:</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Example testing sketch for various DHT humidity/temperature sensors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Written by ladyada, public domain</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// REQUIRES the following Arduino libraries:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - DHT Sensor Library: https://github.com/adafruit/DHT-sensor-library</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - Adafruit Unified Sensor Lib: https://github.com/adafruit/Adafruit_Sensor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;LiquidCrystal.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;DHT.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">DHTPIN</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression number" style="color:#36acaa">19</span><span class="token macro property expression" style="color:#36acaa">     </span><span class="token macro property comment" style="color:#999988;font-style:italic">// Digital pin connected to the DHT sensor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Uncomment whatever type you&#x27;re using!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name" style="color:#36acaa">DHTTYPE</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression" style="color:#36acaa">DHT11   </span><span class="token macro property comment" style="color:#999988;font-style:italic">// DHT 11</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//#define DHTTYPE DHT22   // DHT 22  (AM2302), AM2321</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//#define DHTTYPE DHT21   // DHT 21 (AM2301)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Connect pin 1 (on the left) of the sensor to +5V</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// NOTE: If using a board with 3.3V logic like an Arduino Due connect pin 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// to 3.3V instead of 5V!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Connect pin 8 of the sensor to whatever your DHTPIN is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Connect pin 3 (on the right) of the sensor to GROUND (if your sensor has 3 pins)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Connect pin 4 (on the right) of the sensor to GROUND and leave the pin 3 EMPTY (if your sensor has 4 pins)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Connect a 10K resistor from pin 2 (data) to pin 1 (power) of the sensor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Initialize DHT sensor.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Note that older versions of this library took an optional third parameter to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// tweak the timings for faster processors.  This parameter is no longer needed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// as the current DHT reading algorithm adjusts itself to work on faster procs.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DHT </span><span class="token function" style="color:#d73a49">dht</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DHTPIN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> DHTTYPE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// initialize the library by associating any needed LCD interface pin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// with the arduino pin number it is connected to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> rs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> en </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> d4 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> d5 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> d6 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> d7 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LiquidCrystal </span><span class="token function" style="color:#d73a49">lcd</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> en</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> d4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> d5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> d6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> d7</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">begin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">9600</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">F</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;DHTxx test!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dht</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">begin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// set up the LCD&#x27;s number of columns and rows:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lcd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">begin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Print a message to the LCD.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lcd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;LCD Ready!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Wait a few seconds between measurements.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">delay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Reading temperature or humidity takes about 250 milliseconds!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Sensor readings may also be up to 1 seconds &#x27;old&#x27; (its a very slow sensor)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> h </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dht</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">readHumidity</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Read temperature as Celsius (the default)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> t </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dht</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">readTemperature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Check if any reads failed and exit early (to try again).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Print readings using the serial port</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">isnan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">h</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isnan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">F</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Failed to read from DHT sensor!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">F</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Humidity: &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">h</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">F</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;%  Temperature: &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">F</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;°C &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Print readings using the lcd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lcd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">clear</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//Choosing the first line and row</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lcd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setCursor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//Typing Humedad:   to the first line starting from the first row</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lcd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Humedad: &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//Typing the humidity readings after &quot;Humedad: &quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lcd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">h</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lcd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;%&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lcd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setCursor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//Typing Temperatura:   to the first line starting from the first row</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lcd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Temp: &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//Typing   the temperature readings after &quot;Temperatura: &quot; </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lcd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lcd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">char</span><span class="token punctuation" style="color:#393A34">)</span><span class="token number" style="color:#36acaa">223</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// displaying degree symbol (°).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lcd</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;C&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a class="hash-link" aria-label="Direct link to References" title="Direct link to References" href="/Material/docs/Labs/lab6#references">​</a></h2><ul>
<li><a href="https://randomnerdtutorials.com/esp32-dht11-dht22-temperature-humidity-sensor-arduino-ide/" target="_blank" rel="noopener noreferrer">https://randomnerdtutorials.com/esp32-dht11-dht22-temperature-humidity-sensor-arduino-ide/</a></li>
<li><a href="https://randomnerdtutorials.com/esp32-dht11-dht22-temperature-humidity-web-server-arduino-ide/" target="_blank" rel="noopener noreferrer">https://randomnerdtutorials.com/esp32-dht11-dht22-temperature-humidity-web-server-arduino-ide/</a></li>
<li><a href="https://learn.sparkfun.com/tutorials/rht03-dht22-humidity-and-temperature-sensor-hookup-guide/all" target="_blank" rel="noopener noreferrer">https://learn.sparkfun.com/tutorials/rht03-dht22-humidity-and-temperature-sensor-hookup-guide/all</a></li>
<li><a href="https://learn.adafruit.com/dht/overview" target="_blank" rel="noopener noreferrer">https://learn.adafruit.com/dht/overview</a></li>
<li><a href="https://programarfacil.com/blog/arduino-blog/sensor-dht11-temperatura-humedad-arduino/" target="_blank" rel="noopener noreferrer">https://programarfacil.com/blog/arduino-blog/sensor-dht11-temperatura-humedad-arduino/</a></li>
<li><a href="https://www.arduino.cc/reference/en/libraries/dht-sensor-library/" target="_blank" rel="noopener noreferrer">https://www.arduino.cc/reference/en/libraries/dht-sensor-library/</a></li>
<li><a href="https://wiki.seeedstudio.com/Grove-TemperatureAndHumidity_Sensor/" target="_blank" rel="noopener noreferrer">https://wiki.seeedstudio.com/Grove-TemperatureAndHumidity_Sensor/</a></li>
<li><a href="https://www.seeedstudio.com/Grove-Temperature-Humidity-Sensor-DHT11.html" target="_blank" rel="noopener noreferrer">https://www.seeedstudio.com/Grove-Temperature-Humidity-Sensor-DHT11.html</a></li>
<li><a href="https://www.seeedstudio.com/blog/2020/04/07/how-to-pick-the-best-temperature-and-humidity-sensor-for-your-arduino-project/" target="_blank" rel="noopener noreferrer">https://www.seeedstudio.com/blog/2020/04/07/how-to-pick-the-best-temperature-and-humidity-sensor-for-your-arduino-project/</a></li>
<li><a href="https://www.seeedstudio.com/blog/2019/08/22/8-types-of-temperature-sensors-you-should-know/" target="_blank" rel="noopener noreferrer">https://www.seeedstudio.com/blog/2019/08/22/8-types-of-temperature-sensors-you-should-know/</a></li>
<li><a href="https://www.seeedstudio.com/blog/2022/11/11/selection-guide-of-grove-temperature-and-humidity-sensor-that-support-esphome/" target="_blank" rel="noopener noreferrer">https://www.seeedstudio.com/blog/2022/11/11/selection-guide-of-grove-temperature-and-humidity-sensor-that-support-esphome/</a></li>
<li><a href="https://playground.arduino.cc/Main/KeypadTutorial/" target="_blank" rel="noopener noreferrer">https://playground.arduino.cc/Main/KeypadTutorial/</a></li>
<li><a href="https://learn.adafruit.com/matrix-keypad" target="_blank" rel="noopener noreferrer">https://learn.adafruit.com/matrix-keypad</a></li>
<li><a href="https://randomnerdtutorials.com/arduino-membrane-keypad-tutorial/" target="_blank" rel="noopener noreferrer">https://randomnerdtutorials.com/arduino-membrane-keypad-tutorial/</a></li>
<li><a href="https://www.luisllamas.es/arduino-teclado-matricial/" target="_blank" rel="noopener noreferrer">https://www.luisllamas.es/arduino-teclado-matricial/</a></li>
<li><a href="https://www.circuitbasics.com/how-to-set-up-a-keypad-on-an-arduino/" target="_blank" rel="noopener noreferrer">https://www.circuitbasics.com/how-to-set-up-a-keypad-on-an-arduino/</a></li>
<li><a href="https://docs.arduino.cc/learn/electronics/lcd-displays/" target="_blank" rel="noopener noreferrer">https://docs.arduino.cc/learn/electronics/lcd-displays/</a></li>
</ul></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Material/docs/Labs/lab5"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Laboratory 5</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Material/docs/Labs/lab7"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Laboratory 7</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#summary">Summary</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#hardware">Hardware</a><ul><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#components">Components</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#schematics">Schematics</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#connection-diagram">Connection diagram</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#software">Software</a><ul><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#setting">Setting</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#other-resources">Other resources</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#summary-1">Summary</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#hardware-1">Hardware</a><ul><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#components-1">Components</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#schematics-1">Schematics</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#connection-diagram-1">Connection diagram</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#software-1">Software</a><ul><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#platformio-setting">Platformio setting</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#other-resources-1">Other resources</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#before-to-start">Before to start</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#about-lcd-displays">About LCD displays</a><ul><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#pins-and-connection">Pins and connection</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#memory-of-hitachi-hd44780-controller">Memory of Hitachi HD44780 controller</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#basic-commands">Basic commands</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#busy-flag-bf---busy-flag">Busy Flag (BF - BUSY FLAG)</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#handling-the-lcd-using-arduino">Handling the LCD using Arduino</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#summary-2">Summary</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#hardware-2">Hardware</a><ul><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#components-2">Components</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#schematics-2">Schematics</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#connection-diagram-2">Connection diagram</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#software-2">Software</a></li><li><a class="table-of-contents__link toc-highlight" href="/Material/docs/Labs/lab6#references">References</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Material/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>